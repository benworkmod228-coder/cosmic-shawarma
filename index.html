<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Garant_Squad</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
margin:0;
font-family:Segoe UI,sans-serif;
background:linear-gradient(135deg,#0f0f0f,#1c1c1c);
color:white;
}

header{
padding:18px;
text-align:center;
font-size:22px;
font-weight:bold;
background:#111;
box-shadow:0 0 20px rgba(0,255,200,0.2);
}

.tabs{
display:flex;
background:#151515;
}

.tabs button{
flex:1;
padding:12px;
border:none;
background:none;
color:white;
font-weight:bold;
cursor:pointer;
}

.tabs button.active{
border-bottom:3px solid #00ffc8;
}

.container{padding:20px;}

.card{
background:#1e1e1e;
padding:20px;
border-radius:15px;
margin-bottom:20px;
box-shadow:0 0 15px rgba(0,255,200,0.05);
}

input,textarea,select{
width:100%;
padding:12px;
margin-top:8px;
margin-bottom:15px;
border-radius:10px;
border:none;
background:#2a2a2a;
color:white;
}

button.primary{
width:100%;
padding:14px;
border-radius:12px;
border:none;
font-weight:bold;
cursor:pointer;
background:linear-gradient(90deg,#00ffc8,#00b3ff);
color:black;
}

.deal{
background:#141414;
padding:15px;
border-radius:12px;
margin-top:10px;
}

.hidden{display:none;}
</style>
</head>

<body>

<header>üõ° Garant_Squad</header>

<div class="tabs">
<button onclick="switchTab('create')" id="tab-create" class="active">–°–æ–∑–¥–∞—Ç—å</button>
<button onclick="switchTab('history')" id="tab-history">–ò—Å—Ç–æ—Ä–∏—è</button>
<button onclick="switchTab('profile')" id="tab-profile">–ü—Ä–æ—Ñ–∏–ª—å</button>
</div>

<div class="container">

<div id="create" class="tab-content">
<div class="card">
<h3>–°–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏</h3>

<select id="role">
<option value="buyer">–Ø –ø–æ–∫—É–ø–∞—Ç–µ–ª—å</option>
<option value="seller">–Ø –ø—Ä–æ–¥–∞–≤–µ—Ü</option>
</select>

<input type="number" id="secondUser" placeholder="ID –≤—Ç–æ—Ä–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞">

<input type="number" id="amount" placeholder="–°—É–º–º–∞ –æ—Ç 2$" min="2">

<textarea id="description" rows="5"
placeholder="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ —É—Å–ª–æ–≤–∏—è —Å–¥–µ–ª–∫–∏: –ø—Ä–µ–¥–º–µ—Ç —Å–¥–µ–ª–∫–∏, —Å—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä–µ–¥–∞—á–∏, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞—á–µ—Å—Ç–≤—É, —Å–ø–æ—Å–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç–æ—Ä–æ–Ω.">
</textarea>

<input type="file" id="fileUpload">

<button class="primary" onclick="createDeal()">–°–æ–∑–¥–∞—Ç—å —Å–¥–µ–ª–∫—É</button>

</div>
</div>

<div id="history" class="tab-content hidden">
<div class="card">
<h3>–ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫</h3>
<div id="historyList">
<div class="deal">–ò—Å—Ç–æ—Ä–∏—è –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–¥–µ–ª–æ–∫</div>
</div>
</div>
</div>

<div id="profile" class="tab-content hidden">
<div class="card">
<h3>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h3>
<div>ID: <span id="myId"></span></div>
<div>–°—Ç–∞—Ç—É—Å: –ù–∞–¥—ë–∂–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫</div>
</div>
</div>

</div>

<script>

const tg = window.Telegram.WebApp;
tg.expand();

document.getElementById("myId").innerText = tg.initDataUnsafe.user.id;

function switchTab(tab){
document.querySelectorAll(".tab-content").forEach(t=>t.classList.add("hidden"));
document.getElementById(tab).classList.remove("hidden");

document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
document.getElementById("tab-"+tab).classList.add("active");
}

function createDeal(){

const role=document.getElementById("role").value;
const secondUser=document.getElementById("secondUser").value;
const amount=parseFloat(document.getElementById("amount").value);
const description=document.getElementById("description").value;
const fileInput=document.getElementById("fileUpload");

if(!secondUser||amount<2||description.length<20){
alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—Å–µ –ø–æ–ª—è (–º–∏–Ω 2$ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)");
return;
}

const fileName=fileInput.files.length?fileInput.files[0].name:null;

const dealData={
creator_id: tg.initDataUnsafe.user.id,
second_user_id: parseInt(secondUser),
amount: amount,
description: description,
file_name: fileName
};

tg.sendData(JSON.stringify(dealData));

addToHistory(amount, secondUser);

alert("–°–¥–µ–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≥–∞—Ä–∞–Ω—Ç—É");
}

function addToHistory(amount,user){
const history=document.getElementById("historyList");
history.innerHTML+=`
<div class="deal">
üíº ${amount}$ <br>
üë§ –£—á–∞—Å—Ç–Ω–∏–∫: ${user} <br>
‚è≥ –°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
</div>
`;
}

</script>

</body>
</html>
